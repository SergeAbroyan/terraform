---
# Add Amazon Corretto repository (alternative if OpenJDK is unavailable)
- name: Add Amazon Corretto 11 repository
  command: sudo rpm --import https://yum.corretto.aws/corretto.key
  become: yes

- name: Install the yum repository for Amazon Corretto 11
  get_url:
    url: https://yum.corretto.aws/corretto.repo
    dest: /etc/yum.repos.d/corretto.repo
    mode: '0644'

# Install Amazon Corretto 11
- name: Install Amazon Corretto 11
  dnf:
    name: java-11-amazon-corretto
    state: present

# Verify Java Installation
- name: Verify Java version
  command: java -version
  register: java_version_output
  ignore_errors: yes

- debug:
    msg: "{{ java_version_output.stderr }}"
